<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Resource List Test</title>
        <script src="https://unpkg.com/vue@2.5.13/dist/vue.js"></script>
        <script src="../lib/polaris-vue.js"></script>
        <link rel="stylesheet" href="../lib/polaris-vue.css"></link>
    </head>
    <body>
        <div id="app">

            <polaris-page title="Test Page">

                <polaris-card>
                    <polaris-resource-list
                        ref="list"
                        :items="products"
                        @on-selection-change="setSelectedItems"
                    >
                        <template slot="item" slot-scope="{item}">
                            <polaris-resource-list-item
                                :id="item.id"
                                :attribute-one="item.title"
                                :media="{src: 'https://via.placeholder.com/50x50', alt: '', size: 'small'}"
                                @click="clickItem"
                                selectable
                            >
                            </polaris-resource-list-item>
                        </template>
                    </polaris-resource-list>
                </polaris-card>

                {{selectedItems}}

                <polaris-button @click="selectAll">Select All</polaris-button>

            </polaris-page>




        </div>

        <script>
            Vue.use(PolarisVue);

            var root = new Vue({
                el: '#app',
                methods: {
                    clickItem: function(e){
                        e.checkValue = !e.checkValue
                    },
                    selectAll(){
                        console.log("Select All");
                        console.log(this.$refs);
                        for (let i in this.$refs.list.$children){
                            let item = this.$refs.list.$children[i]
                            console.log(item);
                            console.log( item.checkValue = true);
                        }
                    },
                    setSelectedItems(value) {
                        if( value.checkValue){
                            this.selectedItems.push(this.products[this.products.findIndex(item => item.id === value.id)])
                        } else {
                            this.selectedItems.splice(this.selectedItems.findIndex(item => item.id === value.id),1)
                        }
                    }
                },
                data: {
                    selectedItems : [],
                    products: [
                        {
                            id: 245,
                            title: 'Product 1',
                            value: 1,
                        },
                        {
                            id: 300,
                            title: 'Product 2',
                            value: 667,
                        },
                        {
                            id: 6667,
                            title: 'Product 4',
                            value: 222,
                        },
                        {
                            id: 897,
                            title: 'Product 5',
                            value: 344,
                        },
                    ],
                    value1: ''
                },
                computed: {}

            });
        </script>

    </body>
</html>
